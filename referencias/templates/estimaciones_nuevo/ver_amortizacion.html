{% extends 'base.html' %}

{% block content %}
<div class="max-w-4xl mx-auto py-10">
    <h1 class="text-2xl font-bold mb-6 text-center">Editar Amortización</h1>

    <form method="POST" action="{{ url_for('estimaciones_nuevo.ver_amortizacion', estimacion_id=estimacion.id) }}">
        <div class="bg-white shadow rounded-lg p-6 mb-6">

            <h2 class="text-lg font-semibold mb-4">Resumen del Anticipo</h2>

            <div class="grid grid-cols-2 gap-4 text-sm">
                <div><strong>Subtotal de la estimación:</strong></div>
                <div class="text-right">{{ subtotal_estimacion | moneda }}</div>

                <div><strong>% Anticipo:</strong></div>
                <div class="text-right">{{ porcentaje_anticipo }}%</div>

                <div><strong>Anticipo Base:</strong></div>
                <div class="text-right">{{ anticipo_base | moneda }}</div>

                <div><strong>IVA del Anticipo:</strong></div>
                <div class="text-right">{{ iva_anticipo | moneda }}</div>

                <div><strong>Total del Anticipo:</strong></div>
                <div class="text-right">{{ total_anticipo | moneda }}</div>

                <div><strong>Total ya amortizado:</strong></div>
                <div class="text-right text-blue-600">{{ amortizado_total | moneda }}</div>

                <div><strong>Saldo por amortizar:</strong></div>
                <div class="text-right text-violet-600">{{ saldo_amortizar | moneda }}</div>
            </div>
        </div>

        <div class="bg-white shadow rounded-lg p-6 mb-6">
            <h2 class="text-lg font-semibold mb-4">Editar Amortización para esta estimación</h2>

            <div class="grid grid-cols-2 gap-4 items-center">
                <label for="amortizacion"><strong>Monto a amortizar (sin IVA):</strong></label>
                <input type="number" step="any" name="amortizacion" id="amortizacion" value="{{ monto_amortizacion }}"
                       class="border px-3 py-2 rounded text-right w-full" required>

                <div><strong>IVA amortización:</strong></div>
                <div class="text-right">{{ iva_amortizacion | moneda }}</div>

                <div><strong>Total amortización:</strong></div>
                <div class="text-right">{{ total_amortizacion | moneda }}</div>
            </div>
        </div>

        <div class="text-right">
            <button type="submit" class="bg-green-600 hover:bg-green-700 text-white font-semibold px-6 py-2 rounded shadow">
                Guardar amortización
            </button>
            <a href="{{ url_for('estimaciones_nuevo.ver_otras_deducciones', estimacion_id=estimacion.id) }}"
               class="ml-4 inline-block bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2 rounded shadow">
                Siguiente →
            </a>
        </div>
    </form>
</div>
{% endblock %}